<!DOCTYPE html>
<html>
<style>
h1, h2 {
  font-family: "Comic Sans MS";
  text-align: center;
}

p {
  font-size: 70%;
}

</style>
<body>

<h1>Places to Visit in LA! :)</h1>
<h2> Using <em>Google Maps API</em> woohoo </h2>

<script>
async function getIcons() {
  const response = await fetch('https://api.myjson.com/bins/785pc');
  const icons = await response.json();
  console.log(icons);
  return icons;
}
</script>

<div id="map" style="width:100%;height:400px;"></div>

<script>


function myMap() {

  //Location of Map
  var myLatLng = {lat: 34.068921, lng: -118.4473698};

//Map
  var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 12,
    center: myLatLng
  });



//Star-Icon
  var pandaImage = {
    url: 'http://www.free-icons-download.net/images/cute-small-star-icon-34614.png',
    scaledSize: {
      width: 50,
      height: 50
    },
  };

  setMarkers(map);
}


async function setMarkers(map) {

  const icons = await getIcons();

  for (const myicon of icons){
    const marker = new google.maps.Marker({
      position: myicon.position,
      map: map,
      title: myicon.title,
      icon: {
        url: myicon.icon,
        scaledSize: {
          width: 50,
          height: 50
        }
      }
    });

    var infowindow = new google.maps.InfoWindow();
    console.log(myicon);
    const popUpBox =
      '<div>' +
        '<div> HELLO BONJOUR NIHAO ANYEONG </div>' +
        '<p> (click image for more info) </p>' +
        '<a href = ' + myicon.link + '>' +
        '<img  width = 70%, height = 70% src = ' + myicon.image + '/>' +
        '</a>'
      '</div>';

    google.maps.event.addListener (marker, 'click', function () {
      infowindow.setContent(popUpBox);
      infowindow.setOptions({maxWidth: 150});
       infowindow.open(map, this);
    });
  }

}
</script>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBLpxRCBAV58QWZJJN6vQevrEVKd-VWhek&callback=myMap"></script>


</body>
</html>
